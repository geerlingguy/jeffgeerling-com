{{ if .Site.Params.commentsGlobalEnable }}
<div class="comments">
  <h2 class="title">Comments</h2>
  {{ $site_url := "https://comments.jeffgeerling.com" }}
  {{ if hugo.IsServer }}
    {{ $site_url = "http://dev-comments.jeffgeerling.com:8022" }}
  {{ end }}
  <script>
    var remark_config = {
      host: "{{ $site_url }}",
      site_id: "jeffgeerling_com",
      theme: window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches ? "dark" : "light",
      simple_view: true,
      show_email_subscription: false,
      show_rss_subscription: false,
      no_footer: true,
    }
    window.matchMedia('(prefers-color-scheme:dark)').addEventListener('change', event => {
      const newColorScheme = event.matches ? "dark" : "light";
      window.REMARK42.changeTheme(newColorScheme);
    });
  </script>
  <script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>
  <div id="remark42"></div>
</div>
{{ else }}
<div class="comments">
  <h2 class="title">Comments</h2>
  <p>Comments are disabled due to my <a href="/blog/2026/migrated-to-hugo/">2026 migration from Drupal to Hugo</a>.</p>
  <p>I'm <a href="https://github.com/geerlingguy/jeffgeerling-com/issues/167">migrating them</a>, but it will take time. Thank you for your patience!</p>
</div>
{{ end }}
